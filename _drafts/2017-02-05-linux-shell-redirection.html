---
layout: post
title: Linux shell redirection
date: '2017-02-05T22:20:00.000+07:00'
author: Huy Luu
tags:
- Linux
modified_time: '2017-02-10T22:22:12.830+07:00'
blogger_id: tag:blogger.com,1999:blog-2409403985918607624.post-4282451853561761323
blogger_orig_url: http://publicloop.blogspot.com/2017/02/linux-shell-redirection.html
---

Even though I googled and used this many time, I always forgot about all these: &amp;2&gt;1, 1&gt;2&amp;, 1&gt;&amp;2. So I hope that writing it down myself can help to remember their rule.<br /><br /><h2>Linux file descriptor</h2><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">0: stdin</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">1: stdout</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">2: stderr</span><br /><br /><h2>Redirect to a file name</h2><h3>Redirect output to a file named `1`</h3><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test&gt;1 # test</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test &gt;1 # test</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test &gt; 1 # test</span><br /><br /><h3>Redirect stdout/stderr to a file named `1`</h3><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 1&gt;1 # test</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 1&gt; 1 # test</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 1 &gt; 1 # <span style="color: red;">test 1</span></span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 2&gt;1 # redirect stderr to file named `1`</span><br /><br /><h3>Redirect both stdout and stderr to a file named `1`</h3><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test &amp;&gt;1 # redirect stdout&nbsp;+&nbsp;stderr to file named `1`</span><br /><br /><h2>Redirect to a file descriptor</h2><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 2&gt;&amp;1 # redirect stderr to stdout</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 2&gt; &amp;1 # <span style="color: red;">shell error (space character before &amp;1)</span></span><br /><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test &gt;&amp;2 # redirect stdout to stderr</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">echo test 1&gt;&amp;2 # redirect stdout to stderr</span><br /><br /><h2>stderr and Pipes</h2>This won't work<br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">$ grep hosts /etc | grep 'Is a directory' &gt; result.txt</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">grep: /etc: Is a directory</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">$ cat result.txt</span><br /><br />If we want to pipe the stderr, have to redirect stderr to stdout first<br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">$ grep hosts /etc 2&gt;&amp;1 | grep 'Is a directory' &gt; result.txt</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">$ cat result.txt</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">grep: /etc: Is a directory</span><br /><br /><h2>Reference</h2><a href="http://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout" rel="nofollow" target="_blank">http://www.jstorimer.com/blogs/workingwithcode/7766119-when-to-use-stderr-instead-of-stdout</a><br /><a href="http://www.tldp.org/LDP/abs/html/io-redirection.html" rel="nofollow" target="_blank">http://www.tldp.org/LDP/abs/html/io-redirection.html</a><br /><br />